{%- liquid
  assign collection = collection | default: collections.all
-%}

<section class="py-20">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    {%- if collection.title != blank -%}
      <div class="text-center mb-10">
        <h1 class="font-serif text-3xl sm:text-4xl tracking-tight">{{ collection.title }}</h1>
        {%- if collection.description != blank -%}
          <div class="mt-3 text-[#2B2B2B]/70 max-w-2xl mx-auto">
            {{ collection.description }}
          </div>
        {%- endif -%}
      </div>
    {%- endif -%}

    {%- if collection.products.size > 0 -%}
      <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
        {%- for product in collection.products -%}
          <article class="rounded-xl bg-white ring-1 ring-black/5 p-6 shadow-[0_2px_12px_rgba(47,62,52,0.08)]">
            {%- if product.featured_image -%}
              <a href="{{ product.url }}" class="block aspect-square overflow-hidden rounded-lg mb-4">
                <img
                  src="{{ product.featured_image | image_url: width: 600 }}"
                  alt="{{ product.featured_image.alt | escape }}"
                  class="h-full w-full object-cover hover:scale-105 transition-transform duration-300"
                  width="{{ product.featured_image.width }}"
                  height="{{ product.featured_image.height }}"
                  loading="lazy"
                >
              </a>
            {%- endif -%}

            <h3 class="font-serif text-xl tracking-tight">
              <a href="{{ product.url }}" class="hover:text-[#2F3E34]">{{ product.title }}</a>
            </h3>

            <div class="mt-2">
              {%- if product.price_varies -%}
                <span class="text-lg font-medium text-[#2F3E34]">
                  {{ product.price_min | money }}â€“{{ product.price_max | money }}
                </span>
              {%- else -%}
                <span class="text-lg font-medium text-[#2F3E34]">{{ product.price | money }}</span>
              {%- endif -%}
            </div>

            {%- if product.description != blank -%}
              <p class="mt-2 text-sm text-[#2B2B2B]/70 line-clamp-2">{{ product.description | strip_html | truncatewords: 20 }}</p>
            {%- endif -%}

            <form action="{{ routes.cart_add_url }}" method="post" enctype="multipart/form-data" class="mt-4">
              <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
              <input type="hidden" name="quantity" value="1">
              <button
                type="submit"
                name="add"
                class="inline-flex w-full items-center justify-center rounded-md bg-[#2F3E34] px-4 py-2 text-sm font-medium text-white hover:bg-[#25342B] focus:outline-none focus-visible:ring-2 focus-visible:ring-[#9BB7A7]"
                {% unless product.selected_or_first_available_variant.available %}disabled{% endunless %}
              >
                {%- if product.selected_or_first_available_variant.available -%}
                  Add to Cart
                {%- else -%}
                  Sold Out
                {%- endif -%}
              </button>
            </form>
          </article>
        {%- endfor -%}
      </div>
    {%- else -%}
      <div class="text-center py-20">
        <p class="text-[#2B2B2B]/70">No products found in this collection.</p>
      </div>
    {%- endif -%}
  </div>
</section>

{% schema %}
{
  "name": "Collection",
  "settings": []
}
{% endschema %}

